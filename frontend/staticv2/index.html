<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B700%3B900&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900"
    />

    <title>Stitch Design</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body>
    <div class="relative flex size-full min-h-screen flex-col bg-[#101a23] dark group/design-root overflow-x-hidden" style='font-family: Inter, "Noto Sans", sans-serif;'>
      <div class="layout-container flex h-full grow flex-col">        <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#223649] px-10 py-3">          <div class="flex items-center gap-4 text-white">
            <img src="logo.png" alt="SecretShare Logo" class="h-8 w-auto">
            <h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em]">SecureSharer</h2>
          </div><div class="flex flex-1 justify-end gap-8">            <div class="flex items-center gap-9">
              <a class="text-white text-sm font-medium leading-normal" href="#how-it-works">How it works</a>
              <a class="text-white text-sm font-medium leading-normal" href="#why-choose">Why choose SecretShare?</a>
            </div>            <div
              class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 cursor-pointer"
              style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDU-j0wNyUKuIvcmTMleDvWmlVk_RErBSesvnYVgcCCMv9spYcDLUFZFA37GOa6YERCEzl5awdwEeWs21DMtrGPF8uDYTv5J9CC-lsqMzeu00oNqrbELqmA74QAVOiTkBLEAZtsKBfmLyHz3mYzRBafeMsrIXJQgwa3g8C5NznSILXM_v0J8Bxq2fd1O1s6ETK1jl4LL0m876r46_Dekf42eO26CiE0H_ZG5SrBwhjrfI0XL_eZaZxZZEKwRhZRI2a3tVmhQsRYdyg");'
              title="Profile (Coming Soon)"
            ></div>
          </div>
        </header>
        <div class="px-40 flex flex-1 justify-center py-5">
          <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
            <div class="@container">
              <div class="@[480px]:p-4">                <div
                  class="flex min-h-[480px] flex-col gap-6 bg-[#101a23] @[480px]:gap-8 @[480px]:rounded-xl items-center justify-center p-4"
                >
                  <div class="flex flex-col gap-2 text-center">
                    <h1
                      class="text-white text-4xl font-black leading-tight tracking-[-0.033em] @[480px]:text-5xl @[480px]:font-black @[480px]:leading-tight @[480px]:tracking-[-0.033em]"
                    >
                      Share secrets that self-destruct
                    </h1>
                    <h2 class="text-white text-sm font-normal leading-normal @[480px]:text-base @[480px]:font-normal @[480px]:leading-normal">
                      Share private information securely with a link that expires after being viewed. Perfect for sensitive data, passwords, and confidential messages.
                    </h2>
                  </div>                  <label class="flex flex-col min-w-40 h-14 w-full max-w-[480px] @[480px]:h-16">
                    <div class="flex w-full flex-1 items-stretch rounded-xl h-full">
                      <div
                        class="text-[#90aecb] flex border border-[#314d68] bg-[#182734] items-center justify-center pl-[15px] rounded-l-xl border-r-0"
                        data-icon="MagnifyingGlass"
                        data-size="20px"
                        data-weight="regular"
                      >
                        <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                          <path
                            d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"
                          ></path>
                        </svg>
                      </div>
                      <input
                        placeholder="Enter your secret message"
                        class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-white focus:outline-0 focus:ring-0 border border-[#314d68] bg-[#182734] focus:border-[#314d68] h-full placeholder:text-[#90aecb] px-[15px] rounded-r-none border-r-0 pr-2 rounded-l-none border-l-0 pl-2 text-sm font-normal leading-normal @[480px]:text-base @[480px]:font-normal @[480px]:leading-normal"
                        value=""
                      />
                      <div class="flex items-center justify-center rounded-r-xl border-l-0 border border-[#314d68] bg-[#182734] pr-[7px]">
                        <button
                          class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 @[480px]:h-12 @[480px]:px-5 bg-[#0b80ee] text-white text-sm font-bold leading-normal tracking-[0.015em] @[480px]:text-base @[480px]:font-bold @[480px]:leading-normal @[480px]:tracking-[0.015em]"
                        >
                          <span class="truncate">Create Secret Link</span>
                        </button>
                      </div>
                    </div>
                  </label>
                  
                  <!-- Result area for showing the generated link -->
                  <div id="resultArea" class="hidden mt-6 p-4 bg-[#182734] border border-[#314d68] rounded-xl max-w-[480px] w-full">
                    <div class="flex flex-col gap-3">
                      <h3 class="text-white text-sm font-medium">Your secret link has been created:</h3>
                      <div class="flex items-center gap-2 bg-[#101a23] border border-[#314d68] rounded-lg p-3">
                        <input 
                          id="secretLinkInput" 
                          type="text" 
                          readonly 
                          class="flex-1 bg-transparent text-white text-sm border-none focus:outline-none select-all"
                          placeholder="Secret link will appear here..."
                        />
                        <button 
                          id="copyLinkButton"
                          class="flex items-center justify-center w-8 h-8 bg-[#0b80ee] hover:bg-[#0969d3] rounded text-white transition-colors"
                          title="Copy to clipboard"
                        >
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256">
                            <path d="M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H80v72a8,8,0,0,0,8,8h72Zm48-48H96V48H208Z"></path>
                          </svg>
                        </button>
                      </div>
                      <p class="text-[#90aecb] text-xs">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 256 256" class="inline mr-1">
                          <path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm16-40a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176ZM112,84a12,12,0,1,1,12,12A12,12,0,0,1,112,84Z"></path>
                        </svg>
                        This link will only work once and then be permanently deleted.
                      </p>
                    </div>
                  </div>
                </div>              </div>
            </div>
            <div class="flex flex-col gap-10 px-4 py-10 @container" id="how-it-works">
              <div class="flex flex-col gap-6">
                <div class="flex flex-col gap-4">
                  <h1
                    class="text-white tracking-light text-[32px] font-bold leading-tight @[480px]:text-4xl @[480px]:font-black @[480px]:leading-tight @[480px]:tracking-[-0.033em] max-w-[720px]"
                  >
                    How it works
                  </h1>
                  <p class="text-white text-base font-normal leading-normal max-w-[720px]">Share secrets securely in three simple steps.</p>
                </div>
                <button
                  class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 @[480px]:h-12 @[480px]:px-5 bg-[#0b80ee] text-white text-sm font-bold leading-normal tracking-[0.015em] @[480px]:text-base @[480px]:font-bold @[480px]:leading-normal @[480px]:tracking-[0.015em] w-fit"
                >
                  <span class="truncate">Create Secret Link</span>
                </button>
              </div>
              <div class="grid grid-cols-[repeat(auto-fit,minmax(158px,1fr))] gap-3 p-0">
                <div class="flex flex-1 gap-3 rounded-lg border border-[#314d68] bg-[#182734] p-4 flex-col">
                  <div class="text-white" data-icon="ShieldCheck" data-size="24px" data-weight="regular">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path
                        d="M208,40H48A16,16,0,0,0,32,56v58.78c0,89.61,75.82,119.34,91,124.39a15.53,15.53,0,0,0,10,0c15.2-5.05,91-34.78,91-124.39V56A16,16,0,0,0,208,40Zm0,74.79c0,78.42-66.35,104.62-80,109.18-13.53-4.51-80-30.69-80-109.18V56H208ZM82.34,141.66a8,8,0,0,1,11.32-11.32L112,148.68l50.34-50.34a8,8,0,0,1,11.32,11.32l-56,56a8,8,0,0,1-11.32,0Z"
                      ></path>
                    </svg>
                  </div>
                  <div class="flex flex-col gap-1">
                    <h2 class="text-white text-base font-bold leading-tight">Write your secret</h2>
                    <p class="text-[#90aecb] text-sm font-normal leading-normal">Compose your confidential message in the text box above.</p>
                  </div>
                </div>
                <div class="flex flex-1 gap-3 rounded-lg border border-[#314d68] bg-[#182734] p-4 flex-col">
                  <div class="text-white" data-icon="Clock" data-size="24px" data-weight="regular">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path
                        d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48A8,8,0,0,1,192,128Z"
                      ></path>
                    </svg>
                  </div>
                  <div class="flex flex-col gap-1">
                    <h2 class="text-white text-base font-bold leading-tight">Share the link</h2>
                    <p class="text-[#90aecb] text-sm font-normal leading-normal">Send the generated link to the intended recipient.</p>
                  </div>
                </div>
                <div class="flex flex-1 gap-3 rounded-lg border border-[#314d68] bg-[#182734] p-4 flex-col">
                  <div class="text-white" data-icon="Eye" data-size="24px" data-weight="regular">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path
                        d="M247.31,124.76c-.35-.79-8.82-19.58-27.65-38.41C194.57,61.26,162.88,48,128,48S61.43,61.26,36.34,86.35C17.51,105.18,9,124,8.69,124.76a8,8,0,0,0,0,6.5c.35.79,8.82,19.57,27.65,38.4C61.43,194.74,93.12,208,128,208s66.57-13.26,91.66-38.34c18.83-18.83,27.3-37.61,27.65-38.4A8,8,0,0,0,247.31,124.76ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.47,133.47,0,0,1,25,128,133.33,133.33,0,0,1,48.07,97.25C70.33,75.19,97.22,64,128,64s57.67,11.19,79.93,33.25A133.46,133.46,0,0,1,231.05,128C223.84,141.46,192.43,192,128,192Zm0-112a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Z"
                      ></path>
                    </svg>
                  </div>
                  <div class="flex flex-col gap-1">
                    <h2 class="text-white text-base font-bold leading-tight">Secret disappears</h2>
                    <p class="text-[#90aecb] text-sm font-normal leading-normal">Once opened, the secret is permanently deleted, ensuring privacy.</p>
                  </div>
                </div>
              </div>
            </div>            <div class="flex flex-col gap-10 px-4 py-10 @container" id="why-choose">
              <div class="flex flex-col gap-6">
                <div class="flex flex-col gap-4">
                  <h1
                    class="text-white tracking-light text-[32px] font-bold leading-tight @[480px]:text-4xl @[480px]:font-black @[480px]:leading-tight @[480px]:tracking-[-0.033em] max-w-[720px]"
                  >
                    Why choose SecretShare?
                  </h1>
                  <p class="text-white text-base font-normal leading-normal max-w-[720px]">Experience unparalleled security and peace of mind.</p>
                </div>
                <button
                  class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 @[480px]:h-12 @[480px]:px-5 bg-[#0b80ee] text-white text-sm font-bold leading-normal tracking-[0.015em] @[480px]:text-base @[480px]:font-bold @[480px]:leading-normal @[480px]:tracking-[0.015em] w-fit"
                >
                  <span class="truncate">Create Secret Link</span>
                </button>
              </div>
              <div class="grid grid-cols-[repeat(auto-fit,minmax(158px,1fr))] gap-3 p-0">
                <div class="flex flex-1 gap-3 rounded-lg border border-[#314d68] bg-[#182734] p-4 flex-col">
                  <div class="text-white" data-icon="Lock" data-size="24px" data-weight="regular">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path
                        d="M208,80H176V56a48,48,0,0,0-96,0V80H48A16,16,0,0,0,32,96V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V96A16,16,0,0,0,208,80ZM96,56a32,32,0,0,1,64,0V80H96ZM208,208H48V96H208V208Zm-68-56a12,12,0,1,1-12-12A12,12,0,0,1,140,152Z"
                      ></path>
                    </svg>
                  </div>
                  <div class="flex flex-col gap-1">
                    <h2 class="text-white text-base font-bold leading-tight">End-to-end encryption</h2>
                    <p class="text-[#90aecb] text-sm font-normal leading-normal">
                      Your secrets are encrypted from the moment you write them until they are viewed, ensuring maximum security.
                    </p>
                  </div>
                </div>
                <div class="flex flex-1 gap-3 rounded-lg border border-[#314d68] bg-[#182734] p-4 flex-col">
                  <div class="text-white" data-icon="Trash" data-size="24px" data-weight="regular">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path
                        d="M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z"
                      ></path>
                    </svg>
                  </div>
                  <div class="flex flex-col gap-1">
                    <h2 class="text-white text-base font-bold leading-tight">Automatic deletion</h2>
                    <p class="text-[#90aecb] text-sm font-normal leading-normal">Secrets are automatically deleted after being viewed, leaving no trace behind.</p>
                  </div>
                </div>
                <div class="flex flex-1 gap-3 rounded-lg border border-[#314d68] bg-[#182734] p-4 flex-col">
                  <div class="text-white" data-icon="Users" data-size="24px" data-weight="regular">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path
                        d="M117.25,157.92a60,60,0,1,0-66.5,0A95.83,95.83,0,0,0,3.53,195.63a8,8,0,1,0,13.4,8.74,80,80,0,0,1,134.14,0,8,8,0,0,0,13.4-8.74A95.83,95.83,0,0,0,117.25,157.92ZM40,108a44,44,0,1,1,44,44A44.05,44.05,0,0,1,40,108Zm210.14,98.7a8,8,0,0,1-11.07-2.33A79.83,79.83,0,0,0,172,168a8,8,0,0,1,0-16,44,44,0,1,0-16.34-84.87,8,8,0,1,1-5.94-14.85,60,60,0,0,1,55.53,105.64,95.83,95.83,0,0,1,47.22,37.71A8,8,0,0,1,250.14,206.7Z"
                      ></path>
                    </svg>
                  </div>
                  <div class="flex flex-col gap-1">
                    <h2 class="text-white text-base font-bold leading-tight">Limited access</h2>
                    <p class="text-[#90aecb] text-sm font-normal leading-normal">Only the recipient with the link can access the secret, preventing unauthorized access.</p>
                  </div>
                </div>
              </div>
            </div><h2 class="text-white text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 pb-3 pt-5">My Secrets</h2>
            
            <!-- History section - initially hidden -->
            <div id="historySection" class="hidden px-4 py-6">
              <div id="linksHistory" class="flex flex-col gap-3">
                <!-- Dynamic history links will be inserted here -->
              </div>
            </div>
            
            <!-- No secrets message - shown when no history -->
            <div id="noSecretsSection" class="flex flex-col px-4 py-6">
              <div class="flex flex-col items-center gap-6">
                <div
                  class="bg-center bg-no-repeat aspect-video bg-cover rounded-xl w-full max-w-[360px]"
                  style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuASPvgEK9yEegnWopv78B7S3Kfj9Eca3MiB6-XEkdtcPE1zVmUm4kQ8eZCpKP-1pcoe0cGwHSYMAqivfZHWkA296RFCPLBrQBEnjdRwKkn0mrmwdpU_SN51_9SOpdAhPExtpm3hS9IQ-KFSLkwh6-AKjGrbcD108tVd2fEyXTAcSkiGGwohtwWhZa250SoDBtUWM3kWYH5PL1TCSSGziMg1itzJNwZpOTg2iuE2H93veVRQfxmK_OrUIgYH6_waT0cjOf0CfV4iX30");'
                ></div>
                <div class="flex max-w-[480px] flex-col items-center gap-2">
                  <p class="text-white text-lg font-bold leading-tight tracking-[-0.015em] max-w-[480px] text-center">No secrets yet</p>
                  <p class="text-white text-sm font-normal leading-normal max-w-[480px] text-center">Create a secret to get started</p>
                </div>
                <button
                  class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-[#0b80ee] text-white text-sm font-bold leading-normal tracking-[0.015em]"
                  onclick="document.querySelector('input[placeholder=&quot;Enter your secret message&quot;]').focus()"
                >
                  <span class="truncate">Create Secret Link</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        <footer class="flex justify-center">
          <div class="flex max-w-[960px] flex-1 flex-col">
            <footer class="flex flex-col gap-6 px-5 py-10 text-center @container">
              <div class="flex flex-wrap items-center justify-center gap-6 @[480px]:flex-row @[480px]:justify-around">
                <a class="text-[#90aecb] text-base font-normal leading-normal min-w-40" href="#">Privacy Policy</a>
                <a class="text-[#90aecb] text-base font-normal leading-normal min-w-40" href="#">Contact Us</a>
              </div>
              <div class="flex flex-wrap justify-center gap-4">
                <a href="#">
                  <div class="text-[#90aecb]" data-icon="TwitterLogo" data-size="24px" data-weight="regular">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path
                        d="M247.39,68.94A8,8,0,0,0,240,64H209.57A48.66,48.66,0,0,0,168.1,40a46.91,46.91,0,0,0-33.75,13.7A47.9,47.9,0,0,0,120,88v6.09C79.74,83.47,46.81,50.72,46.46,50.37a8,8,0,0,0-13.65,4.92c-4.31,47.79,9.57,79.77,22,98.18a110.93,110.93,0,0,0,21.88,24.2c-15.23,17.53-39.21,26.74-39.47,26.84a8,8,0,0,0-3.85,11.93c.75,1.12,3.75,5.05,11.08,8.72C53.51,229.7,65.48,232,80,232c70.67,0,129.72-54.42,135.75-124.44l29.91-29.9A8,8,0,0,0,247.39,68.94Zm-45,29.41a8,8,0,0,0-2.32,5.14C196,166.58,143.28,216,80,216c-10.56,0-18-1.4-23.22-3.08,11.51-6.25,27.56-17,37.88-32.48A8,8,0,0,0,92,169.08c-.47-.27-43.91-26.34-44-96,16,13,45.25,33.17,78.67,38.79A8,8,0,0,0,136,104V88a32,32,0,0,1,9.6-22.92A30.94,30.94,0,0,1,167.9,56c12.66.16,24.49,7.88,29.44,19.21A8,8,0,0,0,204.67,80h16Z"
                      ></path>
                    </svg>
                  </div>
                </a>
                <a href="#">
                  <div class="text-[#90aecb]" data-icon="FacebookLogo" data-size="24px" data-weight="regular">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path
                        d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm8,191.63V152h24a8,8,0,0,0,0-16H136V112a16,16,0,0,1,16-16h16a8,8,0,0,0,0-16H152a32,32,0,0,0-32,32v24H96a8,8,0,0,0,0,16h24v63.63a88,88,0,1,1,16,0Z"
                      ></path>
                    </svg>
                  </div>
                </a>
                <a href="#">
                  <div class="text-[#90aecb]" data-icon="InstagramLogo" data-size="24px" data-weight="regular">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path
                        d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160ZM176,24H80A56.06,56.06,0,0,0,24,80v96a56.06,56.06,0,0,0,56,56h96a56.06,56.06,0,0,0,56-56V80A56.06,56.06,0,0,0,176,24Zm40,152a40,40,0,0,1-40,40H80a40,40,0,0,1-40-40V80A40,40,0,0,1,80,40h96a40,40,0,0,1,40,40ZM192,76a12,12,0,1,1-12-12A12,12,0,0,1,192,76Z"
                      ></path>
                    </svg>
                  </div>
                </a>
              </div>
              <p class="text-[#90aecb] text-base font-normal leading-normal">Â© 2024 SecretShare. All rights reserved.</p>
            </footer>
          </div>
        </footer>
      </div>
    </div>
  </body>  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Get DOM elements first
      const secretInput = document.querySelector('input[placeholder="Enter your secret message"]');
      const createButtons = document.querySelectorAll('button');
      const resultArea = document.getElementById('resultArea');
      const secretLinkInput = document.getElementById('secretLinkInput');
      const copyLinkButton = document.getElementById('copyLinkButton');
      const historySection = document.getElementById('historySection');
      const noSecretsSection = document.getElementById('noSecretsSection');
      const linksHistory = document.getElementById('linksHistory');
      
      // Keep track of generated links - try to load from localStorage
      let generatedLinks = [];
      
      // Try to restore history from localStorage
      try {
        const savedLinks = localStorage.getItem('secretSharerLinks');
        if (savedLinks) {
          generatedLinks = JSON.parse(savedLinks);
          updateHistoryUI();
        } else {
          updateHistoryUI();
        }
      } catch (error) {
        console.error('Failed to load history from localStorage:', error);
        updateHistoryUI();
      }
      
      // Detect environment for API endpoints
      const isDevelopment = window.location.hostname === 'localhost' || 
                           window.location.hostname === '127.0.0.1' ||
                           window.location.protocol === 'file:';
      
      const shareApiEndpoint = isDevelopment 
        ? 'http://127.0.0.1:5000/share'
        : '/api/share';
      
      const revealLinkBasePath = isDevelopment
        ? `${window.location.origin}/view.html#`
        : `${window.location.origin}/view.html#`;

      // Function to handle secret creation
      async function createSecret(button) {
        const secretText = secretInput.value;
        
        if (!secretText.trim()) {
          secretInput.focus();
          return;
        }

        // Show loading state
        const originalText = button.innerHTML;
        button.innerHTML = '<span class="truncate">Creating...</span>';
        button.disabled = true;

        try {
          const response = await fetch(shareApiEndpoint, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ secret: secretText }),
          });

          let responseData;
          try {
            responseData = await response.json();
          } catch (jsonError) {
            const errorText = await response.text();
            throw new Error(`Server returned non-JSON response: ${response.status} - ${errorText || response.statusText}`);
          }
          
          if (response.ok && responseData.link_id) {
            const secretLink = `${revealLinkBasePath}${responseData.link_id}`;
            
            // Add the new link to our history with a timestamp
            const newLinkData = {
              url: secretLink,
              timestamp: new Date().toISOString(),
              id: responseData.link_id
            };
            
            // Add to the beginning of the array
            generatedLinks.unshift(newLinkData);
            
            // Limit history to 10 items
            if (generatedLinks.length > 10) {
              generatedLinks = generatedLinks.slice(0, 10);
            }
            
            // Save to localStorage
            try {
              localStorage.setItem('secretSharerLinks', JSON.stringify(generatedLinks));
            } catch (storageError) {
              console.error('Failed to save to localStorage:', storageError);
            }
            
            // Show the result area
            resultArea.classList.remove('hidden');
            secretLinkInput.value = secretLink;
            
            // Clear the input and scroll to result
            secretInput.value = '';
            resultArea.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            // Update the history UI with the new link
            updateHistoryUI(true);
            
          } else {
            const errorMessage = responseData.error || `Failed to share secret. Status: ${response.status}`;
            console.error('Error:', errorMessage);
            // Show error in result area
            resultArea.classList.remove('hidden');
            secretLinkInput.value = `Error: ${errorMessage}`;
          }
        } catch (error) {
          console.error('Error sharing secret:', error);
          // Show error in result area
          resultArea.classList.remove('hidden');
          secretLinkInput.value = 'Error: Failed to create secret. Please check if the backend is running.';
        } finally {
          // Restore button state
          button.innerHTML = originalText;
          button.disabled = false;
        }
      }

      // Function to copy link to clipboard
      async function copyToClipboard() {
        try {
          await navigator.clipboard.writeText(secretLinkInput.value);
          // Visual feedback
          const originalIcon = copyLinkButton.innerHTML;
          copyLinkButton.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256">
              <path d="M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"></path>
            </svg>
          `;
          copyLinkButton.style.backgroundColor = '#28a745';
          
          setTimeout(() => {
            copyLinkButton.innerHTML = originalIcon;
            copyLinkButton.style.backgroundColor = '#0b80ee';
          }, 2000);
        } catch (error) {
          console.error('Failed to copy to clipboard:', error);
        }      }

      // Helper function to truncate long links for display
      function truncateLink(url) {
        if (url.length <= 60) return url;
        
        const urlObj = new URL(url);
        const path = urlObj.pathname;
        const id = path.split('#').pop();
        
        // Keep the protocol, host and shorten the ID
        return `${urlObj.protocol}//${urlObj.host}/...#${id.substring(0, 8)}...`;
      }
      
      // Helper function to format the date for display
      function formatDate(dateString) {
        const date = new Date(dateString);
        
        // Format the date in a user-friendly way
        const now = new Date();
        const diffMs = now - date;
        const diffSecs = Math.floor(diffMs / 1000);
        const diffMins = Math.floor(diffSecs / 60);
        const diffHours = Math.floor(diffMins / 60);
        const diffDays = Math.floor(diffHours / 24);
        
        // For recent links, show relative time
        if (diffSecs < 60) {
          return 'Just now';
        } else if (diffMins < 60) {
          return `${diffMins} ${diffMins === 1 ? 'minute' : 'minutes'} ago`;
        } else if (diffHours < 24) {
          return `${diffHours} ${diffHours === 1 ? 'hour' : 'hours'} ago`;
        } else if (diffDays < 7) {
          return `${diffDays} ${diffDays === 1 ? 'day' : 'days'} ago`;
        } else {
          // For older links, show the date
          return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        }
      }
      
      // Update the history UI
      function updateHistoryUI(hasNewLink = false) {
        if (generatedLinks.length === 0) {
          historySection.classList.add('hidden');
          noSecretsSection.classList.remove('hidden');
          return;
        }
        
        // Show the history section, hide the no secrets section
        historySection.classList.remove('hidden');
        noSecretsSection.classList.add('hidden');
        
        // Clear existing links
        linksHistory.innerHTML = '';
        
        // Add each link to the history
        generatedLinks.forEach((linkData, index) => {
          const linkItem = document.createElement('div');
          linkItem.className = 'flex items-center justify-between p-3 bg-[#182734] border border-[#314d68] rounded-lg mb-3';
          
          // Add glow effect to the most recent link if hasNewLink is true
          if (index === 0 && hasNewLink) {
            linkItem.classList.add('ring-2', 'ring-[#0b80ee]', 'ring-opacity-50');
          }
          
          // Format the timestamp
          const formattedTime = formatDate(linkData.timestamp);
          
          // Create the link item HTML
          linkItem.innerHTML = `
            <div class="flex flex-col gap-1 flex-1 min-w-0">
              <span class="text-[#90aecb] text-xs">Created ${formattedTime}</span>
              <a href="${linkData.url}" target="_blank" class="text-white text-sm hover:text-[#0b80ee] transition-colors truncate" title="${linkData.url}">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 256 256" class="inline mr-1">
                  <path d="M208,80H176V56a48,48,0,0,0-96,0V80H48A16,16,0,0,0,32,96V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V96A16,16,0,0,0,208,80ZM96,56a32,32,0,0,1,64,0V80H96ZM208,208H48V96H208V208Zm-68-56a12,12,0,1,1-12-12A12,12,0,0,1,140,152Z"></path>
                </svg>
                ${truncateLink(linkData.url)}
              </a>
            </div>
            <button class="flex items-center justify-center w-8 h-8 bg-[#223649] hover:bg-[#314d68] rounded text-white transition-colors ml-2" title="Copy link">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 256 256">
                <path d="M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H80v72a8,8,0,0,0,8,8h72Zm48-48H96V48H208Z"></path>
              </svg>
            </button>
          `;
          
          // Add the link item to the history
          linksHistory.appendChild(linkItem);
          
          // Add click event to the copy button
          const copyBtn = linkItem.querySelector('button');
          copyBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(linkData.url).then(() => {
              const originalIcon = copyBtn.innerHTML;
              copyBtn.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 256 256">
                  <path d="M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"></path>
                </svg>
              `;
              copyBtn.style.backgroundColor = '#28a745';
              setTimeout(() => {
                copyBtn.innerHTML = originalIcon;
                copyBtn.style.backgroundColor = '#223649';
              }, 2000);
            }).catch(err => {
              console.error('Failed to copy link: ', err);
            });
          });
        });
      }      // Add event listeners to all create buttons
      createButtons.forEach(button => {
        // Skip the copy button
        if (button.id === 'copyLinkButton') return;
        
        const buttonText = button.textContent.trim();
        if (buttonText.includes('Create Secret Link') || buttonText.includes('New Secret')) {
          button.addEventListener('click', async (e) => {
            e.preventDefault();
            await createSecret(button);
          });
        }
      });      // Copy button event listener
      if (copyLinkButton) {
        copyLinkButton.addEventListener('click', copyToClipboard);
      }

      // Allow Enter key to submit
      if (secretInput) {
        secretInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            const mainButton = secretInput.parentElement?.querySelector('button');
            if (mainButton) {
              mainButton.click();
            }
          }
        });
      }
    });
  </script>
</html>